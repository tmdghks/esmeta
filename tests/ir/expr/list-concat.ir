@main def main() = {
  let x = (list [])[#1]
  let y = (list [1,null,"A"])[#1]
  let z = (list [4f])[#1]
  
  let empty = (list-concat)[#1]
  let xs = (list-concat x)[#1]
  let yz = (list-concat y z)[#1]
  let xyz = (list-concat x y z)[#1]

  assert (! (= empty x)) // new address allocated

  assert (! (exists empty[0]))
  assert (! (exists xs[0]))
  assert (exists yz[3])
  assert (exists xyz[3])
  
  assert (= yz[0] 1)
  assert (= yz[1] null)
  assert (= yz[2] "A")
  assert (= yz[3] 4f)

  assert (= xyz[0] 1)
  assert (= xyz[1] null)
  assert (= xyz[2] "A")
  assert (= xyz[3] 4f)
}
